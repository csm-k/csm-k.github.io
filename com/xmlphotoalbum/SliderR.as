package com.xmlphotoalbum{	import caurina.transitions.*;	import flash.events.Event;	import flash.display.*;	import flash.geom.Rectangle;	import flash.events.MouseEvent;	import flash.net.*;	import com.xmlphotoalbum.*;	public class SliderR extends Sprite {		private var photoContainer:Sprite;		private var stageW:Number;		private var stageH:Number;		private var scrollerWidth:Number = 12;		public var scrollerShape:Shape = new Shape();		private var uparrowShape:Shape = new Shape();		private var downarrowShape:Shape = new Shape();		public var tracker:Shape = new Shape();		public var scroller:MovieClip = new MovieClip();		public var scrollerOffset:Number;		function SliderR(_stageW:Number,_stageH:Number,_photoContainer:Sprite,_skinColor:uint):void {			stageW = _stageW;			stageH = _stageH;			photoContainer = _photoContainer;			scrollerShape.graphics.beginFill(_skinColor,0.4);			scrollerShape.graphics.drawRect(0,0,12,18);			scrollerShape.graphics.endFill();			uparrowShape.graphics.lineStyle(1.5, 0xffffff,0.9, true, LineScaleMode.NORMAL, CapsStyle.SQUARE, JointStyle.MITER);			uparrowShape.graphics.moveTo(4,6);			uparrowShape.graphics.lineTo(6,4);			uparrowShape.graphics.lineTo(8,6);			downarrowShape.graphics.lineStyle(1.5, 0xffffff,0.9, true, LineScaleMode.NORMAL, CapsStyle.SQUARE, JointStyle.MITER);			downarrowShape.graphics.moveTo(4,11);			downarrowShape.graphics.lineTo(6,13);			downarrowShape.graphics.lineTo(8,11);			tracker.graphics.beginFill(_skinColor,0.3);			tracker.graphics.drawRect(scrollerWidth/2,5,1,stageH-10);			tracker.graphics.endFill();			tracker.x = stageW - scrollerWidth;			tracker.alpha = 0.8;			addChild(tracker);			addChild(scroller);			scrollerOffset = 10;			scroller.x = stageW-scrollerWidth;			scroller.y = scrollerOffset;			scroller.buttonMode = true;			scroller.addChild(scrollerShape);			scroller.addChild(uparrowShape);			scroller.addChild(downarrowShape);			scroller.addEventListener(MouseEvent.MOUSE_DOWN,dragStart);			//stage.addEventListener(MouseEvent.MOUSE_WHEEL, MouseScroll);		}		//////////////////////////////////////////////////SLIDER EVENT////////////////////////////////////////////////////		private function dragStart(event:MouseEvent):void {			var dragRect:Rectangle = new Rectangle(stageW-scrollerWidth,scrollerOffset,0, stageH-event.target.height-scrollerOffset*2);			event.target.addEventListener(Event.ENTER_FRAME,scrollContent);			event.target.startDrag(false,dragRect);			stage.addEventListener(MouseEvent.MOUSE_UP,dragStop);		}		private function dragStop(event:MouseEvent):void {			scroller.stopDrag();			stage.removeEventListener(MouseEvent.MOUSE_UP,dragStop);			scroller.removeEventListener(Event.ENTER_FRAME,scrollContent);		}		private function scrollContent(event:Event):void {			scrollContentLiar();		}		private function scrollContentLiar():void {			var scrollPercent:Number = Math.ceil(100 * ((scroller.y-scrollerOffset)/(stageH-scroller.height-scrollerOffset)));			Tweener.addTween(photoContainer, {y:-(scrollPercent * photoContainer.height)/(100), time:1});		}		////////////////////////////////MOUSE SCROLLING/////////////////////////////////////////////////////////////////		private function MouseScroll(event:MouseEvent):void {			if (scroller.y > stageH-2*scroller.height-scrollerOffset) {				scroller.y = stageH-2*scroller.height-scrollerOffset;			}			if (event.delta < 0) {				if (scroller.y < ((scroller.y + stageH)-scroller.height-scrollerOffset)) {					scroller.y -= (event.delta*3);					if (scroller.y > ((scroller.y+ stageH)-scroller.height-scrollerOffset)) {						scroller.y = (scroller.y+ stageH)-scroller.height-scrollerOffset;					}					scrollContentLiar();				}			} else {				if (scroller.y > scrollerOffset) {					scroller.y -= (event.delta*3);					if (scroller.y < scrollerOffset) {						scroller.y = scrollerOffset;					}					scrollContentLiar();				}			}		}		////////////////////////////////////////////////////////////////////////////////////////////////////	}}